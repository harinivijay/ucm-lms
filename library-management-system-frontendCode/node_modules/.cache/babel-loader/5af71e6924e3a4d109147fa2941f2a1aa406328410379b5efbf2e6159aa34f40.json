{"ast":null,"code":"var _jsxFileName = \"/Users/harinismac/Documents/Fall 2024 Subjects/Adv DBMS/Project/library-management-system-frontend/src/pages/Admin/BookList.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport './AdminDashboard';\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BookList = () => {\n  _s();\n  const [books, setBooks] = useState([]);\n  const [totalPages, setTotalPages] = useState(0);\n  const [currentPage, setCurrentPage] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [showForm, setShowForm] = useState(false);\n  const [locations, setLocations] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [selectedLocation, setSelectedLocation] = useState(\"MIC Campus\");\n  const [category, setCategory] = useState(\"All\");\n  const [searchvalue, setSearchValue] = useState(\"\");\n  const [selectedBook, setSelectedBook] = useState(null);\n  const [isEditMode, setIsEditMode] = useState(false);\n  const [formData, setFormData] = useState({\n    bookId: \"\",\n    bookName: \"\",\n    authorName: \"\",\n    edition: 1,\n    category: \"\",\n    isAvailable: true,\n    location: \"\",\n    count: 1\n  });\n  useEffect(() => {\n    fetchLocations();\n    fetchCategories();\n    fetchBooks(selectedLocation, currentPage, \"\", category === \"All\" ? null : category);\n  }, [selectedLocation, currentPage, category]);\n  const fetchLocations = async () => {\n    try {\n      const response = await axios.get(\"http://localhost:8080/lms/books/locations\");\n      setLocations(response.data);\n    } catch (error) {\n      toast.error(\"Error fetching locations.\");\n    }\n  };\n  const fetchCategories = async () => {\n    try {\n      const response = await axios.get(\"http://localhost:8080/lms/books/categories\");\n      setCategories(response.data);\n    } catch (error) {\n      toast.error(\"Error fetching categories.\");\n    }\n  };\n  const fetchBooks = async (location, page, searchQuery, category) => {\n    setLoading(true);\n    try {\n      const response = await axios.get(\"http://localhost:8080/lms/books/grouped\", {\n        params: {\n          pageNumber: page,\n          size: 10,\n          locationFilter: location,\n          categoryFilter: category,\n          search: searchQuery\n        }\n      });\n      setBooks(response.data.books);\n      setTotalPages(response.data.totalPages);\n    } catch (error) {\n      toast.error(\"Error fetching books.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const generateBookId = () => `BOOK-${Math.floor(Math.random() * 1000000)}`;\n  const handleSearch = () => {\n    fetchBooks(selectedLocation, 0, searchvalue, category === \"All\" ? null : category);\n    setCurrentPage(0);\n  };\n  const handleFormChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prevData => ({\n      ...prevData,\n      [name]: value\n    }));\n  };\n  const handleAddBook = async e => {\n    e.preventDefault();\n    try {\n      const response = await axios.post(\"http://localhost:8080/lms/books/addBooks\", formData);\n      toast.success(\"Book added successfully!\");\n      fetchBooks(selectedLocation, currentPage, \"\", category === \"All\" ? null : category);\n      setShowForm(false);\n    } catch (error) {\n      toast.error(\"Error adding book.\");\n    }\n  };\n  const handleEdit = book => {\n    setFormData(book);\n    setIsEditMode(true);\n    setShowForm(true);\n  };\n  const handleSaveEdit = async e => {\n    e.preventDefault();\n    try {\n      await axios.put(`http://localhost:8080/lms/books/update/${formData.bookId}`, formData);\n      toast.success(\"Book updated successfully!\");\n      setShowForm(false);\n      setIsEditMode(false);\n      fetchBooks(selectedLocation, currentPage, \"\", category === \"All\" ? null : category);\n    } catch (error) {\n      toast.error(\"Error updating book.\");\n    }\n  };\n  const handlePageChange = newPage => {\n    if (newPage >= 0 && newPage < totalPages) {\n      setCurrentPage(newPage);\n    }\n  };\n  const showAddBookForm = () => {\n    setFormData({\n      bookId: generateBookId(),\n      bookName: \"\",\n      description: \"\",\n      authorName: \"\",\n      edition: 1,\n      category: \"\",\n      isAvailable: true,\n      location: \"\",\n      count: 1\n    });\n    setIsEditMode(false);\n    setShowForm(true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto p-6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 5\n  }, this);\n};\n_s(BookList, \"lQA9XPjFfVHijA4b+ZVNASUDvF4=\");\n_c = BookList;\nexport default BookList;\nvar _c;\n$RefreshReg$(_c, \"BookList\");","map":{"version":3,"names":["React","useEffect","useState","axios","ToastContainer","toast","jsxDEV","_jsxDEV","BookList","_s","books","setBooks","totalPages","setTotalPages","currentPage","setCurrentPage","loading","setLoading","showForm","setShowForm","locations","setLocations","categories","setCategories","selectedLocation","setSelectedLocation","category","setCategory","searchvalue","setSearchValue","selectedBook","setSelectedBook","isEditMode","setIsEditMode","formData","setFormData","bookId","bookName","authorName","edition","isAvailable","location","count","fetchLocations","fetchCategories","fetchBooks","response","get","data","error","page","searchQuery","params","pageNumber","size","locationFilter","categoryFilter","search","generateBookId","Math","floor","random","handleSearch","handleFormChange","e","name","value","target","prevData","handleAddBook","preventDefault","post","success","handleEdit","book","handleSaveEdit","put","handlePageChange","newPage","showAddBookForm","description","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/harinismac/Documents/Fall 2024 Subjects/Adv DBMS/Project/library-management-system-frontend/src/pages/Admin/BookList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport './AdminDashboard';\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nconst BookList = () => {\n  const [books, setBooks] = useState([]);\n  const [totalPages, setTotalPages] = useState(0);\n  const [currentPage, setCurrentPage] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [showForm, setShowForm] = useState(false);\n  const [locations, setLocations] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [selectedLocation, setSelectedLocation] = useState(\"MIC Campus\");\n  const [category, setCategory] = useState(\"All\");\n  const [searchvalue, setSearchValue] = useState(\"\");\n  const [selectedBook, setSelectedBook] = useState(null);\n  const [isEditMode, setIsEditMode] = useState(false);\n\n  const [formData, setFormData] = useState({\n    bookId: \"\",\n    bookName: \"\",\n    authorName: \"\",\n    edition: 1,\n    category: \"\",\n    isAvailable: true,\n    location: \"\",\n    count: 1,\n  });\n\n  useEffect(() => {\n    fetchLocations();\n    fetchCategories();\n    fetchBooks(selectedLocation, currentPage, \"\", category === \"All\" ? null : category);\n  }, [selectedLocation, currentPage, category]);\n\n  const fetchLocations = async () => {\n    try {\n      const response = await axios.get(\"http://localhost:8080/lms/books/locations\");\n      setLocations(response.data);\n    } catch (error) {\n      toast.error(\"Error fetching locations.\");\n    }\n  };\n\n  const fetchCategories = async () => {\n    try {\n      const response = await axios.get(\"http://localhost:8080/lms/books/categories\");\n      setCategories(response.data);\n    } catch (error) {\n      toast.error(\"Error fetching categories.\");\n    }\n  };\n\n  const fetchBooks = async (location, page, searchQuery, category) => {\n    setLoading(true);\n    try {\n      const response = await axios.get(\"http://localhost:8080/lms/books/grouped\", {\n        params: {\n          pageNumber: page,\n          size: 10,\n          locationFilter: location,\n          categoryFilter: category,\n          search: searchQuery,\n        },\n      });\n      setBooks(response.data.books);\n      setTotalPages(response.data.totalPages);\n    } catch (error) {\n      toast.error(\"Error fetching books.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const generateBookId = () => `BOOK-${Math.floor(Math.random() * 1000000)}`;\n\n  const handleSearch = () => {\n    fetchBooks(selectedLocation, 0, searchvalue, category === \"All\" ? null : category);\n    setCurrentPage(0);\n  };\n\n  const handleFormChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prevData) => ({\n      ...prevData,\n      [name]: value,\n    }));\n  };\n\n  const handleAddBook = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await axios.post(\"http://localhost:8080/lms/books/addBooks\", formData);\n      toast.success(\"Book added successfully!\");\n      fetchBooks(selectedLocation, currentPage, \"\", category === \"All\" ? null : category);\n      setShowForm(false);\n    } catch (error) {\n      toast.error(\"Error adding book.\");\n    }\n  };\n\n  const handleEdit = (book) => {\n    setFormData(book);\n    setIsEditMode(true);\n    setShowForm(true);\n  };\n\n  const handleSaveEdit = async (e) => {\n    e.preventDefault();\n    try {\n      await axios.put(`http://localhost:8080/lms/books/update/${formData.bookId}`, formData);\n      toast.success(\"Book updated successfully!\");\n      setShowForm(false);\n      setIsEditMode(false);\n      fetchBooks(selectedLocation, currentPage, \"\", category === \"All\" ? null : category);\n    } catch (error) {\n      toast.error(\"Error updating book.\");\n    }\n  };\n\n  const handlePageChange = (newPage) => {\n    if (newPage >= 0 && newPage < totalPages) {\n      setCurrentPage(newPage);\n    }\n  };\n\n  const showAddBookForm = () => {\n    setFormData({\n      bookId: generateBookId(),\n      bookName: \"\",\n      description: \"\",\n      authorName: \"\",\n      edition: 1,\n      category: \"\",\n      isAvailable: true,\n      location: \"\",\n      count: 1,\n    });\n    setIsEditMode(false);\n    setShowForm(true);\n  };\n\n  return (\n    <div className=\"container mx-auto p-6\">\n      {/* Remaining components are similar */}\n    </div>\n  );\n};\n\nexport default BookList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}